{"id":"nixos-b8u","title":"Fix ai.cachix.org key without corresponding substituter URL","description":"The modules/cachix.nix file has ai.cachix.org-1:... in trusted-public-keys but no corresponding https://ai.cachix.org URL in substituters. Either add the URL or remove the unused key.\n\n**Location:** modules/cachix.nix:21\n\n**Options:**\n1. Add 'https://ai.cachix.org' to substituters if the cache is needed\n2. Remove the ai.cachix.org-1 key if not used\n\n**Labels:** quick-win, cleanup","status":"closed","priority":3,"issue_type":"task","owner":"j@jlnw.nl","created_at":"2026-01-27T21:10:18.794734522Z","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:39:30.361346537Z","closed_at":"2026-01-27T21:39:30.361346537Z","close_reason":"Removed unused ai.cachix.org key that had no corresponding substituter URL","labels":["cleanup"]}
{"id":"nixos-config-24x","title":"Add molly-guard to prevent accidental shutdown/reboot via SSH","description":"Prevents accidental shutdown/reboot when connected via SSH by requiring you to type the hostname to confirm.\n\n**Features:**\n- Intercepts shutdown, reboot, halt, poweroff commands\n- Requires typing hostname to confirm when connected via SSH\n- Simple safety net for remote servers\n\n**Implementation:** services.molly-guard.enable = true;\n\n**Target:** hosts/hetzner-dev.nix","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T17:32:28.235052+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:22:05.212743756Z","closed_at":"2026-01-27T21:22:05.212743756Z","close_reason":"Added molly-guard package to hetzner-dev.nix (NixOS uses package install, not services.enable)","labels":["server-ops"],"dependencies":[{"issue_id":"nixos-config-24x","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:02.876256967Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-395","title":"Add enhanced sysctl tuning with BBR congestion control","description":"Enhance kernel parameters for better performance.\n\n**Additions to existing sysctl config:**\n- net.ipv4.tcp_congestion_control = bbr (faster TCP)\n- net.core.rmem_max / wmem_max (larger buffers)\n- kernel.pid_max = 4194303 (64-bit max)\n- kern.maxproc = 65536\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/sysctl.nix\n\n**Target:** hosts/hetzner-dev.nix (merge with existing sysctl)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T17:32:52.50839+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:37:35.387824382Z","closed_at":"2026-01-27T21:37:35.387824382Z","close_reason":"Added BBR congestion control, larger socket buffers, and increased pid_max for better performance","labels":["performance"],"dependencies":[{"issue_id":"nixos-config-395","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:33.887942063Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-3km","title":"Enable nix-ld for running dynamically linked binaries","description":"Enable nix-ld to run dynamically linked non-Nix executables (AppImages, prebuilt binaries, etc.).\n\n**Features:**\n- Runs binaries that expect FHS paths\n- No need for patchelf or steam-run\n- Useful for downloaded tools, AppImages\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/base.nix\n\n**Implementation:** Single line - programs.nix-ld.enable = true;\n\n**Target:** hosts/hetzner-dev.nix","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T17:32:39.492894+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:24:18.348650425Z","closed_at":"2026-01-27T21:24:18.348650425Z","close_reason":"Enabled programs.nix-ld.enable = true in hetzner-dev.nix","labels":["quick-win"],"dependencies":[{"issue_id":"nixos-config-3km","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:21.608044389Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-43b","title":"Enhance Tailscale config with IPv6 forwarding for exit node","description":"Enable IPv6 forwarding for Tailscale exit node capability.\n\n**Addition:**\n- boot.kernel.sysctl.\"net.ipv6.conf.all.forwarding\" = \"1\"\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/tailscale.nix\n\n**Use case:** Use hetzner-dev as exit node for other devices\n\n**Target:** hosts/hetzner-dev.nix","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T17:33:09.510463+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-26T17:33:09.510463+01:00","labels":["networking"],"dependencies":[{"issue_id":"nixos-config-43b","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:46.9167622Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-5cu","title":"Add K3s lightweight Kubernetes support","description":"Optional: Set up k3s for container orchestration beyond Docker.\n\n**Features:**\n- Lightweight Kubernetes (single binary)\n- Optional Traefik ingress (can disable)\n- GHCR image pull secrets support\n- Namespace setup automation\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/k3s.nix\n\n**Use case:** Running coding agents in isolated pods, container orchestration\n\n**Target:** modules/k3s.nix (optional, only if needed)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T17:33:03.842947+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:02:13.269773677Z","labels":["container"],"dependencies":[{"issue_id":"nixos-config-5cu","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:59.341782954Z","created_by":"Joost van der Laan"},{"issue_id":"nixos-config-5cu","depends_on_id":"nixos-config-fdo","type":"blocks","created_at":"2026-01-27T21:10:03.089151931Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-7jr","title":"Add additional Nix binary caches","description":"Add nix-community binary cache to speed up builds.\n\n**Current state (in modules/cachix.nix):**\n- ✅ cache.nixos.org (already configured)\n- ✅ javdl-nixos-config.cachix.org (already configured)\n- ✅ devenv.cachix.org (already configured)\n- ❌ nix-community.cachix.org (MISSING - to add)\n\n**Implementation:**\nAdd to modules/cachix.nix substituters:\n- https://nix-community.cachix.org\n\nAdd to trusted-public-keys:\n- nix-community.cachix.org-1:mB9FSh9qf2dCimDSUo8Zy7bkq5CX+/rkCWyvRCYg3Fs=\n\n**Note:** Original task mentioned devenv.cachix.org but it's already configured.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T17:33:03.390446+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:39:24.118169027Z","closed_at":"2026-01-27T21:39:24.118169027Z","close_reason":"Added nix-community.cachix.org to substituters and trusted-public-keys","labels":["performance"],"dependencies":[{"issue_id":"nixos-config-7jr","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:40.388922751Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-7rd","title":"Add Podman as Docker alternative","description":"Optional: Set up Podman for rootless containers.\n\n**Features:**\n- Docker-compatible CLI\n- Rootless containers (better security)\n- No daemon required\n- Nix-built image loading\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/podman.nix\n\n**Use case:** Alternative to Docker with better security model\n\n**Target:** modules/podman.nix (optional, only if needed)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T17:33:04.316397+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:02:19.486050566Z","labels":["container"],"dependencies":[{"issue_id":"nixos-config-7rd","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:53.236293752Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-7xx","title":"Implement security audit module with auditd","description":"Set up comprehensive system auditing with auditd.\n\n**Features:**\n- Monitor execve syscalls (process execution)\n- Watch sensitive files (/etc/passwd, /etc/shadow, /etc/sudoers)\n- Monitor SSH keys and config changes\n- Track network/time changes\n- Kernel module loading/unloading\n- Mount operations\n- Log rotation\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/security-audit.nix\n\n**Target:** modules/security-audit.nix","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T17:32:52.036538+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-26T17:32:52.036538+01:00","labels":["security"],"dependencies":[{"issue_id":"nixos-config-7xx","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:02:56.619153131Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-9ys","title":"Implement disk-based automatic Nix garbage collection","description":"Port the disk-based GC module from loom repo. Unlike time-based GC, this checks disk space first and only runs when available space falls below a threshold.\n\n**Features:**\n- Configurable disk threshold (default 50 GiB)\n- Maximum freed space per run\n- Preserve recent generations (e.g., 14d)\n- Low priority (nice 19, idle I/O)\n- Randomized delay to avoid thundering herd\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/automatic-nix-gc.nix\n\n**Target:** modules/automatic-nix-gc.nix + enable in hosts/hetzner-dev.nix","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T17:32:27.316267+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:32:42.159159776Z","closed_at":"2026-01-27T21:32:42.159159776Z","close_reason":"Implemented disk-based GC module with configurable thresholds, low priority execution, and build-time min-free/max-free support","labels":["server-ops"],"dependencies":[{"issue_id":"nixos-config-9ys","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:09.232003954Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-ck3","title":"Enable VS Code Server for remote development","description":"Enable the vscode-server NixOS service for seamless VS Code Remote SSH development.\n\n**Features:**\n- Native VS Code Remote SSH support\n- No manual server installation needed\n- Auto-updates with system\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/vscode-server.nix\n\n**Implementation:** Single line - services.vscode-server.enable = true;\n\n**Target:** hosts/hetzner-dev.nix","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T17:32:38.583596+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-26T20:36:12.840753+01:00","deleted_at":"2026-01-26T20:36:12.840753+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"nixos-config-fdo","title":"Implement SOPS secrets management with SSH host key","description":"Set up sops-nix for encrypted secrets using the SSH host key for decryption.\n\n**Features:**\n- Secrets encrypted at rest in git\n- Decrypts automatically on deploy using SSH host key\n- No separate age key needed\n- Per-machine secrets files\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/secrets.nix\n\n**Requirements:**\n- Add sops-nix to flake inputs\n- Create modules/secrets.nix\n- Set up secrets directory structure\n\n**Target:** modules/secrets.nix + update flake.nix","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T17:32:51.571711+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:28:26.875390094Z","closed_at":"2026-01-27T21:28:26.875390094Z","close_reason":"Implemented sops-nix with SSH host key decryption: added flake input, created modules/secrets.nix, set up secrets directory structure with documentation","labels":["security"],"dependencies":[{"issue_id":"nixos-config-fdo","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:02:50.504790335Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-la9","title":"Implement NixOS auto-update from git","description":"Port the auto-update module from loom repo. Polls a git repository and automatically deploys NixOS configuration when changes are detected.\n\n**Features:**\n- Configurable git repo URL and branch\n- SSH key authentication support\n- Lock file to prevent concurrent updates\n- Tracks deployed revision to avoid re-deploys\n- Optional nix-output-monitor (nom) integration\n- Configurable poll interval\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/nixos-auto-update.nix\n\n**Target:** modules/nixos-auto-update.nix","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T17:32:27.77377+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:36:01.362806182Z","closed_at":"2026-01-27T21:36:01.362806182Z","close_reason":"Implemented NixOS auto-update module with flake support, SSH key auth, and configurable poll intervals","labels":["server-ops"],"dependencies":[{"issue_id":"nixos-config-la9","depends_on_id":"nixos-x4e","type":"child","created_at":"2026-01-27T21:03:15.470752393Z","created_by":"Joost van der Laan"},{"issue_id":"nixos-config-la9","depends_on_id":"nixos-config-fdo","type":"blocks","created_at":"2026-01-27T21:04:09.640101654Z","created_by":"Joost van der Laan"}]}
{"id":"nixos-config-wz9","title":"Add Fail2ban for SSH brute-force protection","description":"Enable fail2ban to protect against SSH brute-force attacks.\n\n**Features:**\n- Automatic IP banning on failed auth attempts\n- Configurable ban time and retry limits\n- Works with existing firewall\n\n**Source:** https://github.com/ghuntley/loom/blob/main/infra/nixos-modules/fail2ban.nix\n\n**Implementation:** Single line - services.fail2ban.enable = true;\n\n**Target:** hosts/hetzner-dev.nix","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T17:32:39.044128+01:00","created_by":"Joost van der Laan","updated_at":"2026-01-26T20:41:14.638571+01:00","deleted_at":"2026-01-26T20:41:14.638571+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"nixos-x4e","title":"Hetzner Dev Server Hardening \u0026 Enhancement","description":"Epic covering all improvements to the hetzner-dev server configuration, including:\n\n**Security:**\n- SOPS secrets management\n- Security audit with auditd\n- molly-guard for SSH safety\n\n**Operations:**\n- Disk-based garbage collection\n- Auto-update from git\n- nix-ld for dynamic binaries\n\n**Performance:**\n- BBR congestion control and sysctl tuning\n- Additional binary caches\n\n**Networking:**\n- Tailscale IPv6 forwarding for exit node\n\n**Optional/Future:**\n- Podman (rootless containers)\n- K3s (lightweight Kubernetes)","status":"open","priority":1,"issue_type":"epic","owner":"j@jlnw.nl","created_at":"2026-01-27T21:02:37.826763614Z","created_by":"Joost van der Laan","updated_at":"2026-01-27T21:02:37.826763614Z"}
